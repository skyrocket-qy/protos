// api.proto
syntax = "proto3";

package slotpb.v1;

option go_package = "github.com/skyrocket-qy/protos/gen/slotpb/v1;slotpbv1";

service SlotService {
  rpc Play(PlayReq) returns (PlayResp);
  rpc BuyFg(BuyFgReq) returns (BuyFgResp);
  rpc GetRoomInfo(GetRoomInfoReq) returns (GetRoomInfoResp);
}

message Event {
  uint32 code = 1;
  bytes data = 2;
}

message BuyFgReq {
  uint32 bet_amount = 1;
}

message BuyFgResp {
  repeated Event events = 1;
  uint64 balance = 2;
}

message RoomStatisticInfo {
  float rtp = 1;
  uint64 fg_cnt = 2;
}

message GetRoomInfoReq {
  uint32 bet_amount = 1;
  uint32 room_id = 2;
}

message GetRoomInfoResp {
  bytes data = 1;
  RoomStatisticInfo today = 2;
  RoomStatisticInfo week = 3;
  RoomStatisticInfo month = 4;
}

message Table {
  repeated Reel reels = 1;
}
message Reel{
  repeated string symbols = 1;
}

message Coordinate{
  int32 x = 1;
  int32 y = 2;
}

message PlayReq {
  uint32 bet_amount = 1;
}

message PlayResp {
  repeated Event events = 1;
  uint64 balance = 2;
}

message JpOut{
  Table table = 1;
  uint64 score = 2;
  JPType type = 3;
}

enum JPType{
  JP_TYPE_UNSPECIFIED = 0;
  MINOR = 1;
  MAJOR = 2;
  GRAND = 3;
}